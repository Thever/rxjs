<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rxjs</title>
</head>
<body>
    <h1>在集合console.log来查看代码的演示效果</h1>
</body>
<script src="https://cdn.bootcdn.net/ajax/libs/rxjs/6.2.0/rxjs.umd.min.js"></script>
<script>
    //  cdn引用的直接调用
    // rxjs.interval(500).pipe(rxjs.operators.take(4)).subscribe(console.log)

    //  tap(nextOrObserver: function, error: function, complete: function): Observable
    
    //  执行命令
    // const {of} = rxjs
    // const {tap,map} = rxjs.operators
    // const source = of(1,2,3,4,5)
    // const example = source.pipe(
    //     tap(val => console.log(`BEFORE MAP: ${val}`)),
    //     map(val => val + 10),
    //     tap(val => console.log(`AFTER MAP: ${val}`))
    // )
    // const subscribe = example.subscribe(val => console.log(val))

    //  伪订阅
    const {of} = rxjs
    const {tap,map} = rxjs.operators
    const source = of(1,2,3,4,5)
    const example = source
        .pipe(
            map(val => val + 10),
            //  接受map返回的对象进行处理
            tap({
                next: val => console.log('on next',val),
                error: error => console.log('on error',error),
                complete: () => console.log('on complete')
            })
        )
        .subscribe(val => console.log(val))
</script>
</html>